蓝绿发布（全量）

> 两个集群分批次更新，可能存在系统过载的问题，需要频繁切换网关，接入新服务。

红黑发布（全量）

	与蓝绿部署相比，红黑部署可以充分利用了云计算的弹性伸缩优势，从而获得了两个收益:一是，简化了流程;二是，避免了在升级的过程中，由于只有一半的服务器提供服务，而可能导致的系统过载问题。

灰度发布（增量）

意义：

​	尽可能减少服务停机时间，控制新版本带来的质量风险

挑战1：

​	新旧版本对数据库的兼容性 （insert into t values ('a','b')）

​	解决办法：规范化写SQL，大规模的变动且数据量小时，可以单独数据源

挑战2：

​	不能直接采用类似Nginx的权重Weight，因为不能保证一个用户的请求在新旧版本间反复横跳

​	解决办法：nginx + lua脚本化

挑战3：

​	什么时候才可以提升分配比例

​	解决办法：监测系统监测运行状况，逐步提升分配比例